{"version":3,"sources":["stores/connectionsStore.ts","stores/filesStore.ts","stores/nodesStore.ts","stores/index.ts","components/Button/styles.ts","components/Button/index.tsx","components/Space/index.ts","components/Sidebar/styles.ts","components/Sidebar/index.tsx","types/ItemTypes.ts","utils/getStyles.ts","styles/themes/dark.ts","components/Nodes/Connection.tsx","components/Nodes/styles.ts","components/Nodes/DialogueNode.tsx","components/Nodes/DialogueNodeDragPreview.tsx","components/Nodes/DraggableDialogueNode.tsx","components/DragAndDrop/styles.ts","components/DragAndDrop/CustomDragLayer.tsx","components/ContextMenu/styles.ts","components/ContextMenu/index.tsx","utils/useWindowDimensions.ts","components/DragAndDrop/ConnectionsContainer.tsx","components/DragAndDrop/DragAndDropContainerGlobal.tsx","components/DragAndDrop/DragAroundCustomLayer.tsx","components/Modal/styles.ts","components/Modal/index.tsx","components/Select/index.tsx","components/TextArea/index.tsx","pages/Main/styles.ts","pages/Main/LoadModal.tsx","pages/Main/index.tsx","styles/global.ts","index.tsx"],"names":["ConnectionsStore","rootStore","connections","this","fromId","toId","key","newMap","update","$set","id","connectionsKeys","forEach","indexOf","Object","keys","decorate","observable","addConnection","action","removeConnnection","computed","FilesStore","file","loadFileModal","state","connection","nodesStore","nodes","connectionsStore","setModal","loadFileContent","NodesStore","left","top","dialogueType","undefined","text","activeNodeModal","mode","$merge","newNodes","nodesKeys","filesStore","opts","filter","activeNode","possibleOptions","option","push","label","value","updateNodePosition","addNode","setActiveNode","reset","activeNodeOptions","showModal","RootStoreContext","createContext","StyledButton","styled","button","props","theme","colors","primary","shade","Button","children","onClick","type","Space","div","width","height","Container","darken","background","TitleContainer","ButtonsContainer","Sidebar","observer","useContext","handleFileDownload","a","json","JSON","stringify","blob","Blob","URL","createObjectURL","href","link","document","createElement","download","name","body","appendChild","click","removeChild","toJS","createdAt","Date","now","ItemTypes","getStyles","isDragging","transform","position","WebkitTransform","opacity","getItemStyles","initialOffset","currentOffset","display","x","y","dark","backgroundSecondary","textSecondary","accent","Connection","from","x1","y1","to","x2","y2","markerMid","stroke","strokeWidth","strokeLinecap","markerUnits","d","IconsContainer","ContentContainer","DeleteIcon","Delete","EditIcon","Edit","DialogueNode","identifier","DialogueNodeDragPreview","DraggableDialogueNode","useDrag","item","collect","monitor","drag","preview","useEffect","getEmptyImage","captureDraggingState","ref","style","DragLayer","CustomDragLayer","useDragLayer","getItem","itemType","getItemType","getInitialSourceClientOffset","getSourceClientOffset","renderItem","ContextItem","last","ContextMenu","options","visible","changeVisibility","useState","setPosition","handleContextMenu","event","preventDefault","clientX","clientY","addEventListener","removeEventListener","map","index","arr","toString","length","callback","handleContextMenuBlur","getWindowDimensions","window","innerWidth","innerHeight","ConnectionsContainer","memo","zIndex","markerWidth","markerHeight","fill","refX","refY","orient","points","fromNode","toNode","DragAndDropContainerGlobal","showContextMenu","setShowContextMenu","windowDimensions","setWindowDimensions","handleResize","useWindowDimensions","moveNode","useCallback","useDrop","accept","drop","delta","getDifferenceFromInitialOffset","Math","round","numberOfNodes","xPos","yPos","onContextMenu","renderNode","DragAroundCustomLayer","Backdrop","Modal","show","onBackdropClick","Select","multiple","placeholder","values","setValues","selectRef","useRef","useField","fieldName","registerField","defaultValue","current","getValue","setValue","className","htmlFor","onChange","hasSelectAll","labelledBy","vals","target","lighten","outline","TextArea","rest","textareaRef","error","path","fontSize","padding","resize","autoCorrect","autoComplete","ModalContainer","ModalTitle","h2","ModalContent","Center","BoxContainer","Form","RawForm","LoadModal","onDrop","acceptedFiles","reader","FileReader","onabort","console","log","onerror","onload","content","result","parse","readAsText","useDropzone","getRootProps","getInputProps","isDragActive","Main","editNodeFormRef","handleEditFormSubmit","data","inConnections","outConnections","node","deleteNode","initialText","initialDialogueType","tempIn","tempOut","handleGetInitialConnections","onSubmit","initialData","autoFocus","submitForm","renderModal","DndProvider","backend","GlobalStyles","createGlobalStyle","SidebarContainer","RootContainer","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.439fb9c6.chunk.js","sourcesContent":["import update from 'immutability-helper';\nimport { action, computed, decorate, observable } from 'mobx';\n\nimport { RootStore } from '.';\nimport { ConnectionMap } from '../types/Connection';\n\nclass ConnectionsStore {\n  private rootStore: RootStore;\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n  }\n\n  connections: ConnectionMap = {};\n\n  public addConnection(fromId: string, toId: string) {\n    const key = `${fromId}|${toId}`;\n\n    const newMap = update(this.connections, {\n      [key]: {\n        $set: {\n          fromId,\n          toId,\n        },\n      },\n    });\n\n    this.connections = newMap;\n  }\n\n  public removeConnnection(id: string) {\n    this.connectionsKeys.forEach((key) => {\n      if (key.indexOf(id) !== -1) {\n        delete this.connections[key];\n      }\n    });\n  }\n\n  public get connectionsKeys() {\n    return Object.keys(this.connections);\n  }\n}\n\ndecorate(ConnectionsStore, {\n  connections: observable,\n  addConnection: action,\n  removeConnnection: action,\n  connectionsKeys: computed,\n});\n\nexport default ConnectionsStore;\n","import update from 'immutability-helper';\nimport { action, decorate, observable } from 'mobx';\n\nimport { RootStore } from '.';\nimport { ConnectionMap } from '../types/Connection';\nimport { FileData } from '../types/FileData';\n\nclass FilesStore {\n  private rootStore: RootStore;\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n  }\n\n  file: FileData = {} as FileData;\n  loadFileModal = false;\n\n  public setModal(state: boolean) {\n    this.loadFileModal = state;\n  }\n\n  public loadFileContent() {\n    if (!this.file) {\n      return;\n    }\n\n    let connections: ConnectionMap = {};\n\n    this.file.connections.forEach((connection) => {\n      const key = `${connection.fromId}|${connection.toId}`;\n\n      connections = update(connections, {\n        [key]: {\n          $set: {\n            fromId: connection.fromId,\n            toId: connection.toId,\n          },\n        },\n      });\n    });\n\n    this.rootStore.nodesStore.nodes = this.file.nodes;\n    this.rootStore.connectionsStore.connections = connections;\n  }\n}\n\ndecorate(FilesStore, {\n  file: observable,\n  loadFileModal: observable,\n  setModal: action,\n  loadFileContent: action,\n});\n\nexport default FilesStore;\n","import update from 'immutability-helper';\nimport { action, computed, decorate, observable } from 'mobx';\n\nimport { RootStore } from '.';\nimport { FileData } from '../types/FileData';\nimport { NodeMap } from '../types/Node';\n\ninterface ActiveNodeModal {\n  id: string;\n  mode: 'delete' | 'edit' | null;\n}\n\nclass NodesStore {\n  private rootStore: RootStore;\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n  }\n\n  nodes: NodeMap = {\n    'id:rootNode': {\n      id: 'id:rootNode',\n      left: 80,\n      top: 20,\n      dialogueType: undefined,\n      text: '',\n    },\n  };\n\n  activeNodeModal: ActiveNodeModal = {\n    id: '',\n    mode: null,\n  };\n\n  public updateNodePosition(id: string, left: number, top: number) {\n    this.nodes = update(this.nodes, {\n      [id]: {\n        $merge: { left, top },\n      },\n    });\n  }\n\n  public addNode(id: string, left: number, top: number) {\n    const newNodes = update(this.nodes, {\n      [id]: {\n        $set: {\n          left,\n          top,\n          id,\n          dialogueType: undefined,\n          text: '',\n        },\n      },\n    });\n\n    this.nodes = newNodes;\n  }\n\n  public deleteNode(id: string) {\n    this.nodesKeys.forEach((key) => {\n      if (key === id) {\n        delete this.nodes[id];\n      }\n    });\n  }\n\n  public setActiveNode(id: string, mode: 'delete' | 'edit' | null) {\n    this.activeNodeModal = {\n      id,\n      mode,\n    };\n  }\n\n  public reset() {\n    this.nodes = {\n      'id:rootNode': {\n        id: 'id:rootNode',\n        left: 80,\n        top: 20,\n        dialogueType: undefined,\n        text: '',\n      },\n    };\n    this.rootStore.connectionsStore.connections = {};\n    this.rootStore.filesStore.file = {} as FileData;\n  }\n\n  public get activeNode() {\n    return this.nodes[this.activeNodeModal.id];\n  }\n\n  public get activeNodeOptions() {\n    const opts = this.nodesKeys.filter((key) => key !== this.activeNode.id);\n    const possibleOptions: { label: string; value: string }[] = [];\n\n    opts.forEach((option) => {\n      possibleOptions.push({\n        label: option,\n        value: option,\n      });\n    });\n\n    return possibleOptions;\n  }\n\n  public get nodesKeys() {\n    return Object.keys(this.nodes);\n  }\n\n  public get showModal() {\n    return this.activeNodeModal.id !== '';\n  }\n}\n\ndecorate(NodesStore, {\n  nodes: observable,\n  activeNodeModal: observable,\n  updateNodePosition: action,\n  addNode: action,\n  setActiveNode: action,\n  reset: action,\n  activeNode: computed,\n  activeNodeOptions: computed,\n  nodesKeys: computed,\n  showModal: computed,\n});\n\nexport default NodesStore;\n","import { createContext } from 'react';\r\n\r\nimport ConnectionsStore from './connectionsStore';\r\nimport FilesStore from './filesStore';\r\nimport NodesStore from './nodesStore';\r\n\r\nexport class RootStore {\r\n  public nodesStore: NodesStore = new NodesStore(this);\r\n  public connectionsStore: ConnectionsStore = new ConnectionsStore(this);\r\n  public filesStore: FilesStore = new FilesStore(this);\r\n}\r\n\r\nexport const RootStoreContext = createContext(new RootStore());\r\n","import { shade } from 'polished';\nimport styled from 'styled-components';\n\nexport const StyledButton = styled.button`\n  background: ${(props) => props.theme.colors.primary};\n  cursor: pointer;\n\n  border: none;\n  outline: none;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 150px;\n  height: 60px;\n  border-radius: 15px;\n\n  color: #fff;\n  font-weight: bold;\n  font-size: 18px;\n\n  :hover {\n    background: ${(props) => shade(0.25, props.theme.colors.primary)};\n  }\n`;\n","import React from 'react';\r\n\r\nimport { StyledButton } from './styles';\r\n\r\ninterface ButtonProps {\r\n  children?: React.ReactElement | string;\r\n  onClick?(): void;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({ children, onClick }) => {\r\n  return (\r\n    <StyledButton type=\"button\" onClick={onClick}>\r\n      {children}\r\n    </StyledButton>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import styled from 'styled-components';\r\n\r\ninterface Props {\r\n  width: number | string;\r\n  height: number | string;\r\n}\r\n\r\nexport const Space = styled.div`\r\n  width: ${(props: Props) =>\r\n    typeof props.width === typeof 'aa' ? props.width : `${props.width}px`};\r\n\r\n  height: ${(props: Props) =>\r\n    typeof props.height === typeof 'aa' ? props.height : `${props.height}px`};\r\n`;\r\n","import { darken } from 'polished';\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  width: 100%;\n  height: 100%;\n  background: ${(props) => darken(0.3, props.theme.colors.background)};\n`;\n\nexport const TitleContainer = styled.div`\n  width: 100%;\n  height: 10%;\n\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n\n  font-size: 24px;\n  font-weight: bold;\n\n  color: ${(props) => props.theme.colors.text};\n\n  padding-top: 20px;\n`;\n\nexport const ButtonsContainer = styled.div`\n  width: 100%;\n  height: auto;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n","import { toJS } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React, { useContext } from 'react';\r\n\r\nimport { RootStoreContext } from '../../stores';\r\nimport { Connection } from '../../types/Connection';\r\nimport { FileData } from '../../types/FileData';\r\nimport Button from '../Button';\r\nimport { Space } from '../Space';\r\nimport { ButtonsContainer, Container, TitleContainer } from './styles';\r\n\r\nconst Sidebar: React.FC = observer(() => {\r\n  const { nodesStore, connectionsStore, filesStore } = useContext(\r\n    RootStoreContext,\r\n  );\r\n\r\n  const handleSave = () => {\r\n    const connections: Connection[] = [];\r\n\r\n    connectionsStore.connectionsKeys.forEach((key) => {\r\n      connections.push(toJS(connectionsStore.connections[key]));\r\n    });\r\n\r\n    const file: FileData = {\r\n      name: 'NewFile',\r\n      createdAt: Date.now(),\r\n      nodes: nodesStore.nodes,\r\n      connections,\r\n    };\r\n\r\n    filesStore.file = file;\r\n  };\r\n\r\n  const handleFileDownload = async () => {\r\n    const json = JSON.stringify(filesStore.file);\r\n    const blob = new Blob([json], { type: 'application/json' });\r\n    const href = await URL.createObjectURL(blob);\r\n\r\n    const link = document.createElement('a');\r\n    link.href = href;\r\n    link.download = filesStore.file.name + '.json';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <TitleContainer>Dialogue Editor</TitleContainer>\r\n      <Space width=\"100%\" height={30} />\r\n      <ButtonsContainer>\r\n        <Button\r\n          onClick={() => {\r\n            nodesStore.reset();\r\n            nodesStore.setActiveNode('', null);\r\n          }}\r\n        >\r\n          Clear\r\n        </Button>\r\n        <Space width=\"100%\" height={20} />\r\n        <Button onClick={handleSave}>Save</Button>\r\n        <Space width=\"100%\" height={20} />\r\n        <Button onClick={() => filesStore.setModal(true)}>Load File</Button>\r\n        {filesStore.file.name ? (\r\n          <>\r\n            <Space width=\"100%\" height={20} />\r\n            <Button onClick={() => handleFileDownload()}>Download File</Button>\r\n          </>\r\n        ) : null}\r\n      </ButtonsContainer>\r\n    </Container>\r\n  );\r\n});\r\n\r\nexport default Sidebar;\r\n","export const ItemTypes = {\r\n  NODE: 'node',\r\n};\r\n","import { CSSProperties } from 'react';\r\nimport { XYCoord } from 'react-dnd';\r\n\r\nexport const getStyles = (\r\n  left: number,\r\n  top: number,\r\n  isDragging: boolean,\r\n): CSSProperties => {\r\n  const transform = `translate3d(${left}px, ${top}px, 0)`;\r\n\r\n  return {\r\n    position: 'absolute',\r\n    transform,\r\n    WebkitTransform: transform,\r\n    opacity: isDragging ? 0 : 1,\r\n    height: isDragging ? 0 : '',\r\n  };\r\n};\r\n\r\nexport const getItemStyles = (\r\n  initialOffset: XYCoord | null,\r\n  currentOffset: XYCoord | null,\r\n): CSSProperties => {\r\n  if (!initialOffset || !currentOffset) {\r\n    return {\r\n      display: 'none',\r\n    };\r\n  }\r\n\r\n  const { x, y } = currentOffset;\r\n  const transform = `translate(${x}px, ${y}px)`;\r\n\r\n  return {\r\n    transform,\r\n    WebkitTransform: transform,\r\n  };\r\n};\r\n","import { DefaultTheme } from 'styled-components';\n\nexport const dark: DefaultTheme = {\n  name: 'dark',\n  colors: {\n    background: '#0e0b16',\n    backgroundSecondary: '#373340',\n    primary: '#4717f6',\n    text: '#fff',\n    textSecondary: '#e7dfdd',\n    accent: '#a239ca',\n  },\n};\n","import React from 'react';\n\nimport { dark } from '../../styles/themes/dark';\n\ninterface Props {\n  from: {\n    x: number;\n    y: number;\n  };\n  to: {\n    x: number;\n    y: number;\n  };\n  markerMid: string;\n}\n\nconst Connection: React.FC<Props> = ({\n  from: { x: x1, y: y1 },\n  to: { x: x2, y: y2 },\n  markerMid,\n}) => {\n  return (\n    <path\n      stroke={dark.colors.textSecondary}\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n      markerUnits={2}\n      d={`M${x1 + 75},${y1 + 50}L${(x1 + x2 + 150) / 2},${\n        (y1 + y2 + 100) / 2\n      }L${x2 + 75},${y2 + 50}`}\n      markerMid={markerMid}\n    />\n  );\n};\n\nexport default Connection;\n","import { Delete, Edit } from '@material-ui/icons';\nimport { shade } from 'polished';\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  width: 150px;\n  height: 100px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  background: ${(props) => shade(0.25, props.theme.colors.primary)};\n  border-radius: 20px;\n  box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.5);\n`;\n\nexport const IconsContainer = styled.div`\n  width: 100%;\n  height: 40px;\n\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  padding: 5px 10px;\n`;\n\nexport const ContentContainer = styled.div`\n  width: 100%;\n  height: 60px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: move;\n\n  color: ${(props) => props.theme.colors.text};\n`;\n\nexport const DeleteIcon = styled(Delete)`\n  width: 30px;\n  height: 30px;\n  color: ${(props) => props.theme.colors.text};\n\n  cursor: pointer;\n`;\n\nexport const EditIcon = styled(Edit)`\n  width: 30px;\n  height: 30px;\n  color: ${(props) => props.theme.colors.text};\n\n  cursor: pointer;\n`;\n","import { observer } from 'mobx-react-lite';\r\nimport React, { useContext } from 'react';\r\n\r\nimport { RootStoreContext } from '../../stores';\r\nimport {\r\n  Container,\r\n  ContentContainer,\r\n  DeleteIcon,\r\n  EditIcon,\r\n  IconsContainer,\r\n} from './styles';\r\n\r\ninterface DialogueNodeProps {\r\n  identifier: string;\r\n}\r\n\r\nconst DialogueNode: React.FC<DialogueNodeProps> = observer(({ identifier }) => {\r\n  const { nodesStore } = useContext(RootStoreContext);\r\n\r\n  const deleteNode = () => {\r\n    nodesStore.setActiveNode(identifier, 'delete');\r\n  };\r\n\r\n  const editNode = () => {\r\n    nodesStore.setActiveNode(identifier, 'edit');\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <IconsContainer>\r\n        {identifier === 'id:rootNode' ? null : (\r\n          <DeleteIcon onClick={deleteNode} />\r\n        )}\r\n        <EditIcon onClick={editNode} />\r\n      </IconsContainer>\r\n      <ContentContainer>{identifier}</ContentContainer>\r\n    </Container>\r\n  );\r\n});\r\n\r\nexport default DialogueNode;\r\n","import React from 'react';\r\n\r\nimport DialogueNode from './DialogueNode';\r\n\r\ninterface DialogueNodeDragPreviewProps {\r\n  identifier: string;\r\n}\r\n\r\nconst DialogueNodeDragPreview: React.FC<DialogueNodeDragPreviewProps> = ({\r\n  identifier,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <DialogueNode identifier={identifier} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DialogueNodeDragPreview;\r\n","import React, { useEffect } from 'react';\r\nimport { DragSourceMonitor, useDrag } from 'react-dnd';\r\nimport { getEmptyImage } from 'react-dnd-html5-backend';\r\n\r\nimport { ItemTypes } from '../../types/ItemTypes';\r\nimport { Node } from '../../types/Node';\r\nimport { getStyles } from '../../utils/getStyles';\r\nimport DialogueNode from './DialogueNode';\r\n\r\nconst DraggableDialogueNode: React.FC<Node> = ({ id, left, top }) => {\r\n  const [{ isDragging }, drag, preview] = useDrag({\r\n    item: { type: ItemTypes.NODE, id, left, top },\r\n    collect: (monitor: DragSourceMonitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  useEffect(() => {\r\n    preview(getEmptyImage(), { captureDraggingState: true });\r\n  }, [preview]);\r\n\r\n  return (\r\n    <div ref={drag} style={getStyles(left, top, isDragging)}>\r\n      <DialogueNode identifier={id} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DraggableDialogueNode;\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n\r\n  background: ${(props) => props.theme.colors.background};\r\n`;\r\n\r\nexport const DragLayer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 100;\r\n  position: fixed;\r\n  pointer-events: none;\r\n`;\r\n","import React from 'react';\r\nimport { useDragLayer } from 'react-dnd';\r\n\r\nimport { ItemTypes } from '../../types/ItemTypes';\r\nimport { Node } from '../../types/Node';\r\nimport { getItemStyles } from '../../utils/getStyles';\r\nimport { DialogueNodeDragPreview } from '../Nodes';\r\nimport { DragLayer } from './styles';\r\n\r\nconst CustomDragLayer: React.FC = () => {\r\n  const {\r\n    itemType,\r\n    isDragging,\r\n    item,\r\n    initialOffset,\r\n    currentOffset,\r\n  } = useDragLayer((monitor) => ({\r\n    item: monitor.getItem() as Node,\r\n    itemType: monitor.getItemType(),\r\n    initialOffset: monitor.getInitialSourceClientOffset(),\r\n    currentOffset: monitor.getSourceClientOffset(),\r\n    isDragging: monitor.isDragging(),\r\n  }));\r\n\r\n  const renderItem = () => {\r\n    switch (itemType) {\r\n      case ItemTypes.NODE:\r\n        return <DialogueNodeDragPreview identifier={item.id} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  if (!isDragging) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <DragLayer>\r\n      <div style={getItemStyles(initialOffset, currentOffset)}>\r\n        {renderItem()}\r\n      </div>\r\n    </DragLayer>\r\n  );\r\n};\r\n\r\nexport default CustomDragLayer;\r\n","import styled from 'styled-components';\r\n\r\ninterface ContainerProps {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\ninterface ContextItemProps {\r\n  last: boolean;\r\n}\r\n\r\nexport const Container = styled.div`\r\n  position: absolute;\r\n  top: ${(props: ContainerProps) => props.y}px;\r\n  left: ${(props: ContainerProps) => props.x + 5}px;\r\n\r\n  z-index: 300;\r\n`;\r\n\r\nexport const ContextItem = styled.div`\r\n  background: #fff;\r\n  border-bottom: ${(props: ContextItemProps) =>\r\n    !props.last ? 'dotted 1px #ccc' : null};\r\n  padding: 5px 25px;\r\n\r\n  cursor: pointer;\r\n\r\n  :hover {\r\n    background: #f1f1f1;\r\n  }\r\n`;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { Container, ContextItem } from './styles';\r\n\r\ninterface Position {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport interface Option {\r\n  label: string;\r\n  callback?(event: React.MouseEvent<any, MouseEvent>): void;\r\n}\r\n\r\ninterface Props {\r\n  options: Option[];\r\n  visible: boolean;\r\n  changeVisibility(state: boolean): void;\r\n}\r\n\r\nconst ContextMenu: React.FC<Props> = ({\r\n  options,\r\n  visible,\r\n  changeVisibility,\r\n}) => {\r\n  const [position, setPosition] = useState<Position>({\r\n    x: 0,\r\n    y: 0,\r\n  });\r\n\r\n  const handleContextMenu = (event: MouseEvent) => {\r\n    event.preventDefault();\r\n    const { clientX: x, clientY: y } = event;\r\n\r\n    setPosition({ x, y });\r\n  };\r\n\r\n  const handleContextMenuBlur = (event: React.MouseEvent<any, MouseEvent>) => {\r\n    event.preventDefault();\r\n\r\n    changeVisibility(false);\r\n    setPosition({ x: 0, y: 0 });\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('contextmenu', handleContextMenu);\r\n    // document.addEventListener('click', handleContextMenuBlur);\r\n\r\n    return () => {\r\n      document.removeEventListener('contextmenu', handleContextMenu);\r\n      // document.removeEventListener('click', handleContextMenuBlur);\r\n    };\r\n  }, []);\r\n\r\n  if (!visible) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Container x={position.x} y={position.y}>\r\n      {options.map((item, index, arr) => {\r\n        return (\r\n          <ContextItem\r\n            key={index.toString()}\r\n            last={arr.length - 1 === index}\r\n            onClick={(event) => {\r\n              if (item.callback) item.callback(event);\r\n              handleContextMenuBlur(event);\r\n            }}\r\n          >\r\n            {item.label}\r\n          </ContextItem>\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ContextMenu;\r\n","import { useEffect, useState } from 'react';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport default function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions(),\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n","import { observer } from 'mobx-react-lite';\nimport React, { memo, useContext } from 'react';\n\nimport { RootStoreContext } from '../../stores';\nimport { dark } from '../../styles/themes/dark';\nimport { Connection as ConnectionLine } from '../Nodes';\n\n// import { Container } from './styles';\nconst ConnectionsContainer: React.FC = memo(\n  observer(() => {\n    const { nodesStore, connectionsStore } = useContext(RootStoreContext);\n\n    return (\n      <svg\n        width=\"100%\"\n        height=\"100%\"\n        style={{\n          zIndex: 400,\n        }}\n      >\n        <defs>\n          <marker\n            id=\"arrowhead\"\n            markerWidth=\"10\"\n            markerHeight=\"7\"\n            fill={dark.colors.textSecondary}\n            refX=\"0\"\n            refY=\"3.5\"\n            orient=\"auto\"\n          >\n            <polygon points=\"0 0, 10 3.5, 0 7\" />\n          </marker>\n        </defs>\n\n        {connectionsStore.connectionsKeys.length > 0\n          ? connectionsStore.connectionsKeys.map((key) => {\n              const connection = connectionsStore.connections[key];\n\n              const fromNode = nodesStore.nodes[connection.fromId];\n              const toNode = nodesStore.nodes[connection.toId];\n\n              if (fromNode === undefined || toNode === undefined) {\n                return null;\n              }\n\n              const from = {\n                x: fromNode.left,\n\n                y: fromNode.top,\n              };\n\n              const to = {\n                x: toNode.left,\n\n                y: toNode.top,\n              };\n\n              return (\n                <ConnectionLine\n                  key={`${connection.fromId}${connection.toId}`}\n                  from={from}\n                  to={to}\n                  markerMid=\"url(#arrowhead)\"\n                />\n              );\n            })\n          : null}\n      </svg>\n    );\n  }),\n);\n\nexport default ConnectionsContainer;\n","import { observer } from 'mobx-react-lite';\nimport React, { useCallback, useContext, useState } from 'react';\nimport { useDrop } from 'react-dnd';\n\nimport { RootStoreContext } from '../../stores';\nimport { ItemTypes } from '../../types/ItemTypes';\nimport { Node } from '../../types/Node';\nimport useWindowDimensions from '../../utils/useWindowDimensions';\nimport ContextMenu from '../ContextMenu';\nimport { DraggableDialogueNode } from '../Nodes';\nimport ConnectionsContainer from './ConnectionsContainer';\nimport { Container } from './styles';\n\nconst DragAndDropContainerGlobal: React.FC = observer(() => {\n  const [showContextMenu, setShowContextMenu] = useState(false);\n  const { width } = useWindowDimensions();\n  const { nodesStore, filesStore } = useContext(RootStoreContext);\n\n  const moveNode = useCallback(\n    (id: string, left: number, top: number) => {\n      nodesStore.updateNodePosition(id, left, top);\n    },\n    [nodesStore],\n  );\n\n  const addNode = (id: string, left: number, top: number) => {\n    nodesStore.addNode(id, left, top);\n  };\n\n  const handleAddNode = (event: React.MouseEvent<any, MouseEvent>) => {\n    const numberOfNodes = nodesStore.nodesKeys.length;\n    const identifier = `id:node${numberOfNodes}`;\n\n    const xPos = event.clientX - 0.15 * width - 75;\n    const yPos = event.clientY - 50;\n\n    addNode(identifier, xPos, yPos);\n  };\n\n  const loadFileClick = () => {\n    filesStore.setModal(true);\n  };\n\n  const [, drop] = useDrop({\n    accept: ItemTypes.NODE,\n    drop(item: Node, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset() as {\n        x: number;\n        y: number;\n      };\n\n      const left = Math.round(item.left + delta.x);\n      const top = Math.round(item.top + delta.y);\n\n      moveNode(item.id, left, top);\n      return undefined;\n    },\n  });\n\n  const renderNode = (item: any, key: string) => {\n    return <DraggableDialogueNode key={key} id={key} {...item} />;\n  };\n\n  if (nodesStore.showModal || filesStore.loadFileModal) {\n    return null;\n  }\n\n  return (\n    <>\n      <ContextMenu\n        options={[\n          { label: 'New Node', callback: handleAddNode },\n          { label: 'Load File', callback: loadFileClick },\n          { label: 'Close' },\n        ]}\n        visible={showContextMenu}\n        changeVisibility={setShowContextMenu}\n      />\n\n      <Container\n        ref={drop}\n        onContextMenu={() => setShowContextMenu(true)}\n        onClick={() => setShowContextMenu(false)}\n      >\n        {nodesStore.nodesKeys.map((key) =>\n          renderNode(nodesStore.nodes[key], key),\n        )}\n        <ConnectionsContainer />\n      </Container>\n    </>\n  );\n});\n\nexport default DragAndDropContainerGlobal;\n","import React from 'react';\r\n\r\nimport { CustomDragLayer, DragAndDropContainerGlobal } from '.';\r\n\r\n// import { Container } from './styles';\r\n\r\nconst DragAroundCustomLayer: React.FC = () => {\r\n  return (\r\n    <>\r\n      <DragAndDropContainerGlobal />\r\n      <CustomDragLayer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DragAroundCustomLayer;\r\n","import styled from 'styled-components';\n\nexport const Backdrop = styled.div`\n  background: rgba(10, 10, 10, 0.5);\n  width: 100vw;\n  height: 100vh;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\nexport const Container = styled.div`\n  position: absolute;\n  background: transparent;\n  width: auto;\n  height: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  z-index: 300;\n  top: 50%;\n  left: 50%;\n  margin-right: -50%;\n  transform: translate(-50%, -50%);\n`;\n","import React from 'react';\r\n\r\nimport { Backdrop, Container } from './styles';\r\n\r\ninterface Props {\r\n  children?: React.ReactElement | string;\r\n  show: boolean;\r\n  onBackdropClick?(): void;\r\n}\r\n\r\nconst Modal: React.FC<Props> = ({ children, show, onBackdropClick }) => {\r\n  if (!show) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Backdrop onClick={onBackdropClick} />\r\n      <Container>{children}</Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import './styles.css';\n\nimport { useField } from '@unform/core';\nimport { lighten } from 'polished';\nimport React, { useEffect, useRef, useState } from 'react';\nimport MultiSelect from 'react-multi-select-component';\n\nimport { dark } from '../../styles/themes/dark';\n\ninterface SelectProps {\n  name: string;\n  options: { label: string; value: string }[];\n  label?: string;\n}\n\ntype Props = JSX.IntrinsicElements['select'] & SelectProps;\n\nconst Select: React.FC<Props> = ({\n  name,\n  multiple,\n  options,\n  placeholder,\n  label,\n}) => {\n  const [values, setValues] = useState<any[]>([]);\n  const selectRef = useRef(null);\n\n  const { fieldName, registerField, defaultValue } = useField(name);\n\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: selectRef.current,\n      getValue: () => {\n        if (!multiple) {\n          return values[0];\n        }\n\n        return values;\n      },\n      setValue: (ref, value) => {\n        if (!multiple) {\n          setValues([value]);\n        }\n      },\n    });\n  }, [registerField, fieldName, multiple, values]);\n\n  useEffect(() => {\n    if (defaultValue && multiple) {\n      setValues(defaultValue);\n    }\n  }, [defaultValue, multiple]);\n\n  const handleValueChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    if (!multiple) {\n      const vals = [];\n      vals.push(event.target.value);\n      setValues(vals);\n    }\n  };\n\n  if (!multiple) {\n    return (\n      <div className=\"select-group\">\n        {label && <label htmlFor={fieldName}>{label}</label>}\n        <select\n          ref={selectRef}\n          value={values[0]}\n          onChange={handleValueChange}\n          className=\"multi-select single\"\n          placeholder={placeholder}\n          defaultValue={defaultValue}\n          style={{\n            background: lighten(0.45, dark.colors.backgroundSecondary),\n            outline: 'none',\n          }}\n        >\n          {options.map((option) => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line jsx-a11y/control-has-associated-label\n  return (\n    <div className=\"select-group\">\n      {label && <label htmlFor={fieldName}>{label}</label>}\n      <MultiSelect\n        options={options}\n        value={values}\n        onChange={setValues}\n        hasSelectAll={false}\n        labelledBy=\"Select\"\n        className=\"multi-select multiple\"\n      />\n    </div>\n  );\n};\n\nexport default Select;\n","import { useField } from '@unform/core';\nimport { lighten } from 'polished';\nimport React, { useEffect, useRef } from 'react';\n\nimport { dark } from '../../styles/themes/dark';\n\ninterface Props {\n  name: string;\n  label?: string;\n  width?: number;\n}\n\ntype TextareaProps = JSX.IntrinsicElements['textarea'] & Props;\n\nconst TextArea: React.FC<TextareaProps> = ({ name, label, width, ...rest }) => {\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const { fieldName, defaultValue, registerField, error } = useField(name);\n\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      path: 'value',\n      ref: textareaRef.current,\n    });\n  }, [fieldName, registerField]);\n\n  return (\n    <div>\n      {label ? <label htmlFor={fieldName}>{label}</label> : null}\n\n      <textarea\n        id={fieldName}\n        ref={textareaRef}\n        defaultValue={defaultValue}\n        style={{\n          width: width || 400,\n          height: 400,\n          background: lighten(0.45, dark.colors.backgroundSecondary),\n          fontSize: 18,\n          padding: 10,\n          resize: 'none',\n          outline: 'none',\n        }}\n        autoCorrect=\"none\"\n        autoComplete=\"none\"\n        {...rest}\n      />\n\n      {error ? <span>{error}</span> : null}\n    </div>\n  );\n};\n\nexport default TextArea;\n","import { Form as RawForm } from '@unform/web';\nimport styled from 'styled-components';\n\ninterface ModalContainerProps {\n  width?: number;\n  height?: number;\n}\n\nexport const ModalContainer = styled.div`\n  background: ${(props) => props.theme.colors.background};\n  width: ${(props: ModalContainerProps) => props.width || 400}px;\n  height: ${(props: ModalContainerProps) => props.height || 400}px;\n  border-radius: 15px;\n\n  display: flex;\n  flex-direction: column;\n\n  color: ${(props) => props.theme.colors.textSecondary};\n`;\n\nexport const ModalTitle = styled.h2`\n  width: 100%;\n  height: 12.5%;\n\n  padding: 10px 20px;\n  text-align: center;\n\n  color: ${(props) => props.theme.colors.textSecondary};\n`;\n\nexport const ModalContent = styled.div`\n  width: 100%;\n  height: 87.5%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const Center = styled.div`\n  width: 100%;\n  height: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const BoxContainer = styled.div`\n  width: 100%;\n  height: auto;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nexport const Form = styled(RawForm)`\n  width: 100%;\n  height: 100%;\n\n  padding: 20px;\n`;\n","import { observer } from 'mobx-react-lite';\r\nimport React, { useCallback, useContext } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\n\r\nimport Modal from '../../components/Modal';\r\nimport { RootStoreContext } from '../../stores';\r\nimport { ModalContainer, ModalContent, ModalTitle } from './styles';\r\n\r\nconst LoadModal: React.FC = observer(() => {\r\n  const { filesStore } = useContext(RootStoreContext);\r\n\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onabort = () => console.log('Read aborted');\r\n      reader.onerror = () => console.log('Read failed');\r\n      reader.onload = () => {\r\n        const content = reader.result?.toString();\r\n        const json = content !== undefined && JSON.parse(content);\r\n\r\n        filesStore.file = json;\r\n        filesStore.loadFileContent();\r\n        filesStore.setModal(false);\r\n      };\r\n\r\n      reader.readAsText(acceptedFiles[0]);\r\n    },\r\n    [filesStore],\r\n  );\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: 'application/json',\r\n    multiple: false,\r\n  });\r\n\r\n  return (\r\n    <Modal\r\n      show={filesStore.loadFileModal}\r\n      onBackdropClick={() => filesStore.setModal(false)}\r\n    >\r\n      <ModalContainer>\r\n        <ModalTitle>Load File</ModalTitle>\r\n        <ModalContent>\r\n          <div {...getRootProps()}>\r\n            <input {...getInputProps()} />\r\n            {isDragActive ? (\r\n              <p>Drop the files here...</p>\r\n            ) : (\r\n              <p>Drag and drop files / Click here</p>\r\n            )}\r\n          </div>\r\n        </ModalContent>\r\n      </ModalContainer>\r\n    </Modal>\r\n  );\r\n});\r\n\r\nexport default LoadModal;\r\n","import { FormHandles, SubmitHandler } from '@unform/core';\nimport { observer } from 'mobx-react-lite';\nimport React, { useContext, useRef } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport backend from 'react-dnd-html5-backend';\n\nimport Button from '../../components/Button';\nimport { DragAroundCustomLayer } from '../../components/DragAndDrop';\nimport Modal from '../../components/Modal';\nimport Select from '../../components/Select';\nimport { Space } from '../../components/Space';\nimport TextArea from '../../components/TextArea';\nimport { RootStoreContext } from '../../stores';\nimport LoadModal from './LoadModal';\nimport {\n  BoxContainer,\n  Center,\n  Form,\n  ModalContainer,\n  ModalContent,\n  ModalTitle,\n} from './styles';\n\n// Add three+ character dialogue option\n\ntype DialogueType = 'player' | 'ai-character';\n\ninterface NodeEditFormData {\n  text: string;\n  inConnections: { label: string; value: string }[];\n  outConnections: { label: string; value: string }[];\n  type: DialogueType;\n}\n\nconst Main: React.FC = observer(() => {\n  const { nodesStore, connectionsStore } = useContext(RootStoreContext);\n  const editNodeFormRef = useRef<FormHandles>(null);\n\n  const deleteNode = (id: string) => {\n    nodesStore.deleteNode(id);\n    connectionsStore.removeConnnection(id);\n  };\n\n  const handleEditFormSubmit: SubmitHandler<NodeEditFormData> = (data) => {\n    // console.log(data);\n    const { inConnections, outConnections, text, type } = data;\n\n    const node = nodesStore.activeNode;\n\n    node.text = text;\n    node.dialogueType = type;\n\n    outConnections.forEach((connection) => {\n      connectionsStore.addConnection(node.id, connection.value);\n    });\n\n    if (node.id !== 'id:rootNode') {\n      inConnections.forEach((connection) => {\n        connectionsStore.addConnection(connection.value, node.id);\n      });\n    }\n\n    nodesStore.setActiveNode('', null);\n  };\n\n  const handleGetInitialConnections = (id: string) => {\n    const tempIn: { label: string; value: string }[] = [];\n    const tempOut: { label: string; value: string }[] = [];\n\n    connectionsStore.connectionsKeys.forEach((key) => {\n      if (connectionsStore.connections[key].fromId === id) {\n        tempOut.push({\n          label: connectionsStore.connections[key].toId,\n          value: connectionsStore.connections[key].toId,\n        });\n      }\n\n      if (connectionsStore.connections[key].toId === id) {\n        tempIn.push({\n          label: connectionsStore.connections[key].fromId,\n          value: connectionsStore.connections[key].fromId,\n        });\n      }\n    });\n\n    return {\n      inConnections: tempIn,\n      outConnections: tempOut,\n    };\n  };\n\n  const renderModal = () => {\n    if (nodesStore.activeNodeModal.mode === 'delete') {\n      return (\n        <Modal\n          show={nodesStore.showModal}\n          onBackdropClick={() => nodesStore.setActiveNode('', null)}\n        >\n          <ModalContainer>\n            <ModalTitle>Are you sure you want to delete this node?</ModalTitle>\n            <ModalContent>\n              <Button\n                onClick={() => {\n                  deleteNode(nodesStore.activeNodeModal.id);\n                  nodesStore.setActiveNode('', null);\n                }}\n              >\n                Yes\n              </Button>\n              <Space width=\"100%\" height={20} />\n              <Button onClick={() => nodesStore.setActiveNode('', null)}>\n                No\n              </Button>\n            </ModalContent>\n          </ModalContainer>\n        </Modal>\n      );\n    }\n    if (nodesStore.activeNodeModal.mode === 'edit') {\n      const node = nodesStore.activeNode;\n      const initialText = node.text;\n      const initialDialogueType = node.dialogueType;\n\n      const { inConnections, outConnections } = handleGetInitialConnections(\n        node.id,\n      );\n\n      return (\n        <Modal\n          show={nodesStore.showModal}\n          onBackdropClick={() => nodesStore.setActiveNode('', null)}\n        >\n          <ModalContainer width={1000} height={800}>\n            <ModalTitle>\n              {`Editing ${nodesStore.activeNodeModal.id}`}\n            </ModalTitle>\n            <ModalContent>\n              <Form\n                ref={editNodeFormRef}\n                onSubmit={handleEditFormSubmit}\n                initialData={{\n                  text: initialText,\n                  inConnections,\n                  outConnections,\n                  type: initialDialogueType,\n                }}\n              >\n                <BoxContainer>\n                  {node.id === 'id:rootNode' ? null : (\n                    <Select\n                      name=\"inConnections\"\n                      label=\"In Connections\"\n                      multiple\n                      options={nodesStore.activeNodeOptions}\n                    />\n                  )}\n                  <Select\n                    name=\"outConnections\"\n                    label=\"Out Connections\"\n                    multiple\n                    options={nodesStore.activeNodeOptions}\n                  />\n                  <Select\n                    name=\"type\"\n                    label=\"Dialogue Type\"\n                    options={[\n                      {\n                        label: 'Select Dialogue Type...',\n                        value: 'None',\n                      },\n                      {\n                        label: 'Player',\n                        value: 'Player',\n                      },\n                      {\n                        label: 'AICharacter',\n                        value: 'AICharacter',\n                      },\n                    ]}\n                  />\n                </BoxContainer>\n                <Space width=\"100%\" height={20} />\n                <BoxContainer>\n                  <TextArea\n                    name=\"text\"\n                    autoFocus\n                    placeholder=\"Dialogue text\"\n                    width={960}\n                  />\n                </BoxContainer>\n                <Space width=\"100%\" height={30} />\n                <Center>\n                  <Button onClick={() => editNodeFormRef.current?.submitForm()}>\n                    Save\n                  </Button>\n                </Center>\n              </Form>\n            </ModalContent>\n          </ModalContainer>\n        </Modal>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <>\n      {renderModal()}\n      <LoadModal />\n      <DndProvider backend={backend}>\n        <DragAroundCustomLayer />\n      </DndProvider>\n    </>\n  );\n});\n\nexport default Main;\n","import styled, { createGlobalStyle } from 'styled-components';\n\nexport const GlobalStyles = createGlobalStyle`\n  * {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    top: 0;\n    left: 0;\n    font-family: 'Fira Code', monospace;\n  }\n\n  html, body {\n    width: 100vw;\n    height: 100vh;\n    background: ${(props) => props.theme.colors.backgroundSecondary};\n  }\n\n  #root {\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nexport const SidebarContainer = styled.div`\n  width: 15vw;\n  height: 100vh;\n`;\n\nexport const ContentContainer = styled.div`\n  width: 85vw;\n  height: 100vh;\n`;\n\nexport const RootContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`;\n","import 'mobx-react-lite/batchingForReactDom';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ThemeProvider } from 'styled-components';\n\nimport Sidebar from './components/Sidebar';\nimport Main from './pages/Main';\nimport {\n  ContentContainer,\n  GlobalStyles,\n  RootContainer,\n  SidebarContainer,\n} from './styles/global';\nimport { dark } from './styles/themes/dark';\n\n// import { light } from './styles/themes/light';\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={dark}>\n      <GlobalStyles />\n      <RootContainer>\n        <SidebarContainer>\n          <Sidebar />\n        </SidebarContainer>\n        <ContentContainer>\n          <Main />\n        </ContentContainer>\n      </RootContainer>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}