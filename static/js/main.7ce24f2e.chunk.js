(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{60:function(n,e,t){n.exports=t(75)},69:function(n,e,t){},75:function(n,e,t){"use strict";t.r(e);t(61);var o=t(0),r=t.n(o),i=t(33),c=t.n(i),a=t(2),l=t(93),u=t(43),d=t(90),s="node",f=function(n,e,t){var o="translate3d(".concat(n,"px, ").concat(e,"px, 0)");return{position:"absolute",transform:o,WebkitTransform:o,opacity:t?0:1,height:t?0:""}},h=function(n,e){if(!n||!e)return{display:"none"};var t=e.x,o=e.y,r="translate(".concat(t,"px, ").concat(o,"px)");return{transform:r,WebkitTransform:r}},b={name:"dark",colors:{background:"#131417",backgroundSecondary:"#1E1F26",primary:"#3511B8",text:"#fff",textSecondary:"#e7dfdd",accent:"#a239ca",success:"#1B7C16",info:"#0078A8",warning:"#FCA105",danger:"#D81E1E"}},m=function(n){var e=n.from,t=e.x,o=e.y,i=n.to,c=i.x,a=i.y,l=n.markerMid;return r.a.createElement("path",{stroke:b.colors.textSecondary,strokeWidth:2,strokeLinecap:"round",markerUnits:2,d:"M".concat(t+100,",").concat(o+75,"L").concat((t+c+200)/2,",").concat((o+a+150)/2,"L").concat(c+100,",").concat(a+75),markerMid:l})},p=t(7),v=t(14),g=t(25),x=t(8),y=t(9),j=t(12),O=t(15),E=t.n(O),w=t(5),k=function(){function n(e){Object(x.a)(this,n),this.rootStore=void 0,this.connections={},this.rootStore=e}return Object(j.a)(n,[{key:"addConnection",value:function(n,e){var t="".concat(n,"|").concat(e),o=E()(this.connections,Object(y.a)({},t,{$set:{fromId:n,toId:e}}));this.connections=o}},{key:"removeConnnection",value:function(n){var e=this;this.connectionsKeys.forEach((function(t){-1!==t.indexOf(n)&&delete e.connections[t]}))}},{key:"connectionsKeys",get:function(){return Object.keys(this.connections)}}]),n}();Object(w.decorate)(k,{connections:w.observable,addConnection:w.action,removeConnnection:w.action,connectionsKeys:w.computed});var C=k,S=function(){function n(e){Object(x.a)(this,n),this.rootStore=void 0,this.file={},this.loadFileModal=!1,this.rootStore=e}return Object(j.a)(n,[{key:"setModal",value:function(n){this.loadFileModal=n}},{key:"loadFileContent",value:function(){if(this.file){var n={};this.file.connections.forEach((function(e){var t="".concat(e.fromId,"|").concat(e.toId);n=E()(n,Object(y.a)({},t,{$set:{fromId:e.fromId,toId:e.toId}}))})),this.rootStore.nodesStore.nodes=this.file.nodes,this.rootStore.connectionsStore.connections=n}}}]),n}();Object(w.decorate)(S,{file:w.observable,loadFileModal:w.observable,setModal:w.action,loadFileContent:w.action});var I=S,F=function(){function n(e){Object(x.a)(this,n),this.rootStore=void 0,this.nodes={"id:rootNode":{id:"id:rootNode",left:80,top:20,dialogueType:void 0,text:""}},this.rootStore=e}return Object(j.a)(n,[{key:"updateNodePosition",value:function(n,e,t){this.nodes=E()(this.nodes,Object(y.a)({},n,{$merge:{left:e,top:t}}))}},{key:"addNode",value:function(n,e,t){var o=E()(this.nodes,Object(y.a)({},n,{$set:{left:e,top:t,id:n,dialogueType:void 0,text:""}}));this.nodes=o}},{key:"deleteNode",value:function(n){var e=this;this.nodesKeys.forEach((function(t){t===n&&delete e.nodes[n]}))}},{key:"reset",value:function(){this.nodes={"id:rootNode":{id:"id:rootNode",left:80,top:20,dialogueType:void 0,text:""}},this.rootStore.connectionsStore.connections={},this.rootStore.filesStore.file={}}},{key:"nodesKeys",get:function(){return Object.keys(this.nodes)}}]),n}();Object(w.decorate)(F,{nodes:w.observable,updateNodePosition:w.action,addNode:w.action,reset:w.action,nodesKeys:w.computed});var M=F,N=Object(o.createContext)(new function n(){Object(x.a)(this,n),this.nodesStore=new M(this),this.connectionsStore=new C(this),this.filesStore=new I(this)}),D=t(3),z=t(31);function L(){var n=Object(D.a)(["\n  background: ",";\n  cursor: pointer;\n\n  border: none;\n  outline: none;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 150px;\n  height: 60px;\n  border-radius: 8px;\n\n  color: #fff;\n  font-weight: bold;\n  font-size: 18px;\n\n  :hover {\n    background: ",";\n  }\n"]);return L=function(){return n},n}var V=a.c.button(L(),(function(n){return n.theme.colors.primary}),(function(n){return Object(z.a)(.25,n.theme.colors.primary)})),B=function(n){var e=n.children,t=n.onClick;return r.a.createElement(V,{type:"button",onClick:t},e)},T=t(41),K=t(20),R=t(19);function A(){var n=Object(D.a)(["\n  color: #fff;\n  margin-bottom: 10px;\n  font-weight: bold;\n  font-size: 18px;\n"]);return A=function(){return n},n}function P(){var n=Object(D.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return P=function(){return n},n}function Y(){var n=Object(D.a)(["\n  padding: 4px;\n  font-size: 14px;\n"]);return Y=function(){return n},n}function J(){var n=Object(D.a)(["\n  color: #000;\n  height: 60%;\n  width: fit-content;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  /* TODO: props background color */\n  background: #f1f1f1;\n  border-radius: 4px;\n\n  margin-right: ",";\n  user-select: none;\n"]);return J=function(){return n},n}function W(){var n=Object(D.a)(["\n  min-width: 200px;\n  width: auto;\n  min-height: 100%;\n  padding: 0 4px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  overflow-x: auto;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n"]);return W=function(){return n},n}function $(){var n=Object(D.a)(["\n  color: ",";\n  font-size: 14px;\n  font-weight: medium;\n"]);return $=function(){return n},n}function U(){var n=Object(D.a)(["\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  /* transform: translateY(10%); */\n"]);return U=function(){return n},n}function X(){var n=Object(D.a)(["\n  width: 1px;\n  height: 60%;\n  background: black;\n"]);return X=function(){return n},n}function H(){var n=Object(D.a)(["\n  height: 100%;\n  width: 50px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return H=function(){return n},n}function q(){var n=Object(D.a)(["\n  width: 100%;\n  height: 100%;\n\n  padding: 0;\n  border: none;\n\n  font-family: sans-serif;\n  font-size: 16px;\n  outline: none;\n"]);return q=function(){return n},n}function G(){var n=Object(D.a)(["\n  flex: 1;\n  height: 100%;\n"]);return G=function(){return n},n}function Q(){var n=Object(D.a)(["\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: row;\n\n  padding: 0 8px;\n"]);return Q=function(){return n},n}function Z(){var n=Object(D.a)(["\n  position: relative;\n  box-sizing: border-box;\n\n  width: ",";\n\n  height: ",";\n\n  border: ",";\n  border-radius: 4px;\n  display: flex;\n  flex-direction: row;\n"]);return Z=function(){return n},n}var _=a.c.div(Z(),(function(n){return"string"===typeof n.width?n.width:"".concat(n.width,"px")}),(function(n){return"string"===typeof n.height?n.height:"".concat(n.height,"px")}),(function(n){return n.isFocused?n.hasError?"1px solid ".concat(n.errorColor):"1px solid ".concat(n.focusedColor):n.hasError?"1px solid ".concat(n.errorColor):"1px solid black"})),nn=a.c.div(Q()),en=a.c.div(G()),tn=a.c.input(q()),on=a.c.div(H()),rn=a.c.span(X()),cn=a.c.svg(U()),an=a.c.span($(),(function(n){return n.color})),ln=a.c.div(W()),un=a.c.div(J(),(function(n){return n.isLast?"0px":"4px"})),dn=a.c.p(Y()),sn=a.c.div(P()),fn=a.c.label(A()),hn=function(n){var e=n.onClick;return r.a.createElement(cn,{viewBox:"0 0 20 20",onClick:e},r.a.createElement("path",{d:"\nM4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481\n 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502\n -4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 \n 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},bn=function(n){var e=n.onClick,t=n.opacity,o=n.viewBox;return r.a.createElement(cn,{viewBox:o||"0 0 20 20",onClick:e,style:{opacity:t,pointerEvents:1===t?"auto":"none",transform:o?"translateY(10%)":""}},r.a.createElement("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))};function mn(){var n=Object(D.a)(["\n  padding: 8px 24px;\n  margin: 0;\n  cursor: pointer;\n\n  border-bottom: ",";\n\n  background: ",";\n\n  &:hover {\n    background: ",";\n  }\n\n  &:active {\n    background: ",";\n  }\n"]);return mn=function(){return n},n}function pn(){var n=Object(D.a)(["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  font-family: sans-serif;\n"]);return pn=function(){return n},n}function vn(){var n=Object(D.a)(["\n  height: auto;\n  width: ",";\n\n  box-sizing: border-box;\n  border: 1px solid black;\n  border-radius: 4px;\n\n  position: absolute;\n  z-index: 999999;\n"]);return vn=function(){return n},n}var gn=a.c.div(vn(),(function(n){return"string"===typeof n.width?n.width:"".concat(n.width,"px")})),xn=a.c.ul(pn()),yn=a.c.li(mn(),(function(n){return n.isLast?"":"1px dashed #ccc"}),(function(n){return n.isActive?n.theme.colors.primary:n.backgroundColor}),(function(n){return Object(z.a)(.1,n.isActive?n.theme.colors.primary:n.backgroundColor)}),(function(n){return Object(z.a)(.15,n.isActive?n.theme.colors.primary:n.backgroundColor)})),jn=Object(o.forwardRef)((function(n,e){var t=n.options,o=n.isVisible,i=n.setIsVisible,c=n.width,a=void 0===c?500:c,l=n.backgroundColor,u=void 0===l?"#fff":l,d=n.selectedColor,s=void 0===d?"#07bcaa":d,f=n.containerStyles,h=void 0===f?void 0:f,b=n.listStyles,m=void 0===b?void 0:b,p=n.itemsStyles,v=void 0===p?void 0:p,g=n.selectOptions,x=void 0===g?function(){return null}:g,y=n.selectedOption,j=void 0===y?void 0:y,O=n.customDropdownItem,E=void 0===O?null:O;return o?r.a.createElement(gn,{width:a,style:h,ref:e},r.a.createElement(xn,{style:m},t.map((function(n,e,t){return E||r.a.createElement(yn,{key:n.value,style:v,isLast:e===t.length-1,isActive:j===n,backgroundColor:u,selectedColor:s,onClick:function(){x([n]),i(!1)}},r.a.createElement("span",null,n.label))})))):null}));function On(){var n=Object(D.a)(["\n  width: ",";\n\n  height: ",";\n"]);return On=function(){return n},n}var En=a.c.div(On(),(function(n){return"string"===typeof n.width?n.width:"".concat(n.width,"px")}),(function(n){return"string"===typeof n.height?n.height:"".concat(n.height,"px")})),wn=Object(o.forwardRef)((function(n,e){var t=n.options,i=n.width,c=void 0===i?500:i,a=n.heihgt,l=void 0===a?38:a,u=n.placeholder,d=n.focusedColor,s=void 0===d?"#2684FF":d,f=n.errorColor,h=void 0===f?"#c91616":f,b=n.isMulti,m=void 0!==b&&b,v=n.containerStyles,g=void 0===v?void 0:v,x=n.inputStyles,y=void 0===x?void 0:x,j=n.selectedItemsContainerStyles,O=void 0===j?void 0:j,E=n.selectedItemStyles,w=void 0===E?void 0:E,k=n.defaultValue,C=void 0===k?[]:k,S=n.customDropdownItem,I=void 0===S?null:S,F=n.listStyles,M=void 0===F?void 0:F,N=Object(o.useState)(!1),D=Object(p.a)(N,2),z=D[0],L=D[1],V=Object(o.useState)(!1),B=Object(p.a)(V,2),T=B[0],K=B[1],A=Object(o.useState)([]),P=Object(p.a)(A,2),Y=P[0],J=P[1],W=Object(o.useState)(""),$=Object(p.a)(W,2),U=$[0],X=$[1],H=Object(o.useState)(C),q=Object(p.a)(H,2),G=q[0],Q=q[1];Object(o.useImperativeHandle)(e,(function(){return{state:G}}),[G]);var Z=Object(o.useRef)(null),cn=function(n){var e=Object(o.useRef)(null),t=Object(o.useCallback)((function(e){"Escape"===e.key&&n()}),[n]),r=Object(o.useCallback)((function(t){e.current&&(e.current.contains(t.target)||null===n||void 0===n||n())}),[n]);return Object(o.useEffect)((function(){return document.addEventListener("click",r),document.addEventListener("keyup",t),function(){document.removeEventListener("click",r),document.removeEventListener("keyup",t)}}),[r,t]),e}((function(){z&&!T&&L(!1)})),sn=function(n){if(!m)return Q([n[0]]),void J([]);Q([].concat(Object(R.a)(G),Object(R.a)(n))),J([])};return Object(o.useEffect)((function(){X((function(){return m?"":G[0]?G[0].label:""}))}),[G,m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{width:c,height:l,isFocused:T,hasError:0!==Y.length,focusedColor:s,errorColor:h,style:g},m&&G.length>0?r.a.createElement(ln,{style:O,className:"dragscroll"},G.map((function(n,e,t){return r.a.createElement(un,{isLast:e===t.length-1,key:n.value,style:w},r.a.createElement(dn,null,n.label),r.a.createElement(bn,{onClick:function(){return function(n){var e=G.filter((function(e){return e!==n}));Q(e)}(n)},opacity:1,viewBox:"0 0 25 25"}))}))):null,r.a.createElement(nn,null,r.a.createElement(en,{onFocus:function(){var n;K(!0),L(!0),null===(n=Z.current)||void 0===n||n.focus()},onBlur:function(){K(!1)},tabIndex:0},r.a.createElement(tn,{ref:Z,placeholder:G.length>0?"":u,value:U,onChange:function(n){X(n.target.value)},onKeyDown:function(n){if(13===n.keyCode){var e,o,r=t.map((function(n){return n.label}));if((null===(e=Z.current)||void 0===e?void 0:e.value)&&r.includes(null===(o=Z.current)||void 0===o?void 0:o.value)){var i=t.filter((function(n){var e;return n.label===(null===(e=Z.current)||void 0===e?void 0:e.value)}));J([]),sn(i),K(!1),L(!1)}else{var c;J(["No option ".concat(null===(c=Z.current)||void 0===c?void 0:c.value," found")]),X(""),L(!1)}}},tabIndex:-1,style:y})),r.a.createElement(on,null,r.a.createElement(bn,{onClick:function(){Q([])},opacity:Number(G.length>0)}),r.a.createElement(En,{width:8,height:"100%"}),r.a.createElement(rn,null),r.a.createElement(En,{width:8,height:"100%"}),r.a.createElement(hn,{onClick:function(){L(!z)}}))),r.a.createElement(jn,{ref:cn,isVisible:z,setIsVisible:L,options:m?t.filter((function(n){return!G.includes(n)})):t,width:c,containerStyles:{top:"110%"},listStyles:M,selectOptions:sn,selectedOption:G[0]||void 0,customDropdownItem:I})),Y.map((function(n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(En,{width:"100%",height:5}),r.a.createElement(an,{color:h},n))})))})),kn=function(n){var e=n.name,t=n.isMulti,i=n.options,c=n.label,a=Object(T.a)(n,["name","isMulti","options","label"]),l=Object(o.useRef)(null),u=Object(K.c)(e),d=u.fieldName,s=u.registerField,f=u.defaultValue;return Object(o.useEffect)((function(){s({name:d,ref:l.current,getValue:function(){var n,e;return t?(null===(e=l.current)||void 0===e?void 0:e.state)?l.current.state:[]:(null===(n=l.current)||void 0===n?void 0:n.state[0])?l.current.state[0]:{label:"",value:""}}})}),[d,s,t]),r.a.createElement(sn,null,c&&r.a.createElement(fn,{htmlFor:"select"},c),r.a.createElement(wn,Object.assign({ref:l,isMulti:t,options:i,defaultValue:f},a)))};t(69);function Cn(){var n=Object(D.a)(["\n  position: relative;\n"]);return Cn=function(){return n},n}var Sn=a.c.div(Cn()),In=function(n){var e=n.name,t=n.label,i=n.width,c=void 0===i?400:i,a=n.height,l=void 0===a?400:a,u=Object(T.a)(n,["name","label","width","height"]),d=Object(o.useRef)(null),s=Object(o.useRef)(null),f=Object(K.c)(e),h=f.fieldName,b=f.defaultValue,m=f.registerField,p=f.error;Object(o.useEffect)((function(){m({name:h,path:"value",ref:d.current})}),[h,m]);var v=function(){var n,e,t;""!==(null===(n=d.current)||void 0===n?void 0:n.value)?null===(e=s.current)||void 0===e||e.classList.add("active"):null===(t=s.current)||void 0===t||t.classList.remove("active")};return r.a.createElement(Sn,{onBlur:v},r.a.createElement("textarea",Object.assign({id:h,ref:d,defaultValue:b,className:"input-control",style:{width:c,height:l},autoCorrect:"off",autoComplete:"off",onBlur:v},u)),t?r.a.createElement("label",{className:"label",htmlFor:h,ref:s},t):null,p?r.a.createElement("span",null,p):null)},Fn=t(88),Mn=t(89),Nn=t(35);function Dn(){var n=Object(D.a)(["\n  width: 100%;\n  height: 100%;\n\n  /* padding: 24px; */\n"]);return Dn=function(){return n},n}function zn(){var n=Object(D.a)(["\n  width: 100%;\n  height: auto;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n\n  padding: 24px;\n"]);return zn=function(){return n},n}function Ln(){var n=Object(D.a)(["\n  width: 100%;\n  height: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Ln=function(){return n},n}function Vn(){var n=Object(D.a)(["\n  width: 100%;\n  height: 87.5%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Vn=function(){return n},n}function Bn(){var n=Object(D.a)(["\n  width: 100%;\n  height: 12.5%;\n\n  padding: 8px 24px;\n  text-align: center;\n\n  color: ",";\n"]);return Bn=function(){return n},n}function Tn(){var n=Object(D.a)(["\n  background: ",";\n  width: ","px;\n  height: ","px;\n  border-radius: 16px;\n\n  display: flex;\n  flex-direction: column;\n\n  color: ",";\n"]);return Tn=function(){return n},n}function Kn(){var n=Object(D.a)(["\n  resize: none;\n  width: 100%;\n  height: 100%;\n  border: none;\n  outline: none;\n  padding: 4px;\n  color: #000;\n  font-size: 12px;\n  font-weight: 500;\n\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n"]);return Kn=function(){return n},n}function Rn(){var n=Object(D.a)(["\n  width: 60%;\n  height: 100%;\n  margin: 0;\n\n  font-size: 16px;\n  font-weight: bold;\n\n  color: ",";\n"]);return Rn=function(){return n},n}function An(){var n=Object(D.a)(["\n  width: 100%;\n  height: 30px;\n  background: ",";\n  padding: 4px;\n\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n\n  display: inline-flex;\n  flex-direction: row;\n\n  cursor: move;\n"]);return An=function(){return n},n}function Pn(){var n=Object(D.a)(["\n  width: 30px;\n  height: 30px;\n  color: ",";\n\n  cursor: pointer;\n  margin-left: auto;\n"]);return Pn=function(){return n},n}function Yn(){var n=Object(D.a)(["\n  width: 30px;\n  height: 30px;\n  color: ",";\n\n  cursor: pointer;\n  margin-left: 4px;\n"]);return Yn=function(){return n},n}function Jn(){var n=Object(D.a)(["\n  width: 100%;\n  height: 120px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: move;\n\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n\n  background: #fefefe;\n  color: #000;\n"]);return Jn=function(){return n},n}function Wn(){var n=Object(D.a)(["\n  width: 200px;\n  height: 150px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Wn=function(){return n},n}var $n=a.c.div(Wn()),Un=a.c.div(Jn()),Xn=Object(a.c)(Fn.a)(Yn(),(function(n){return n.theme.colors.text})),Hn=Object(a.c)(Mn.a)(Pn(),(function(n){return n.theme.colors.text})),qn=a.c.div(An(),(function(n){return n.theme.colors.primary})),Gn=a.c.h5(Rn(),(function(n){return n.theme.colors.text})),Qn=a.c.textarea(Kn()),Zn=a.c.div(Tn(),(function(n){return n.theme.colors.backgroundSecondary}),(function(n){return n.width||400}),(function(n){return n.height||400}),(function(n){return n.theme.colors.textSecondary})),_n=a.c.h2(Bn(),(function(n){return n.theme.colors.text})),ne=a.c.div(Vn()),ee=a.c.div(Ln()),te=a.c.div(zn()),oe=Object(a.c)(Nn.a)(Dn()),re=Object(v.a)((function(n){var e=n.identifier,t=Object(o.useContext)(N),i=t.nodesStore,c=t.connectionsStore,a=Object(o.useState)(i.nodes[e].text),l=Object(p.a)(a,2),u=l[0],d=l[1],s=Object(o.useState)(!1),f=Object(p.a)(s,2),h=f[0],b=f[1],m=Object(o.useState)(!1),v=Object(p.a)(m,2),x=v[0],y=v[1],j=Object(o.useRef)(null),O=function(n){var t=n.inConnections,o=n.outConnections,r=n.text,a=n.type,l=i.nodes[e];l.text=r,l.dialogueType=a.value,o.forEach((function(n){c.addConnection(l.id,n.value)})),"id:rootNode"!==l.id&&t.forEach((function(n){c.addConnection(n.value,l.id)})),y(!1)};return r.a.createElement($n,null,r.a.createElement(qn,null,r.a.createElement(Gn,null,e.replace("id:","")),r.a.createElement(Hn,{fontSize:"small",onClick:function(){return y(!0)}}),"id:rootNode"===e?null:r.a.createElement(Xn,{fontSize:"small",onClick:function(){return b(!0)}})),r.a.createElement(Un,null,r.a.createElement(Qn,{defaultValue:u,placeholder:"Dialogue Text...",onDoubleClick:function(){return y(!0)},onChange:function(n){return d(n.target.value)},onBlur:function(){i.nodes[e].text=u}})),r.a.createElement(g.Modal,{isVisible:h,onBackdropClick:function(){return b(!1)}},r.a.createElement(Zn,null,r.a.createElement(_n,null,"Are you sure you want to delete this node?"),r.a.createElement(ne,null,r.a.createElement(B,{onClick:function(){var n;n=e,i.deleteNode(n),c.removeConnnection(n)}},"Yes"),r.a.createElement(En,{width:"100%",height:20}),r.a.createElement(B,{onClick:function(){b(!1)}},"No")))),function(){var n=i.nodes[e],t=n.text,o={label:n.dialogueType,value:n.dialogueType},a=function(n){var e=[],t=[];return c.connectionsKeys.forEach((function(o){c.connections[o].fromId===n&&t.push({label:c.connections[o].toId,value:c.connections[o].toId}),c.connections[o].toId===n&&e.push({label:c.connections[o].fromId,value:c.connections[o].fromId})})),{inConnections:e,outConnections:t}}(n.id),l=a.inConnections,u=a.outConnections,d=i.nodesKeys.filter((function(n){return n!==e})).map((function(n){return{label:n,value:n}}));return r.a.createElement(g.Modal,{isVisible:x,onBackdropClick:function(){return y(!1)}},r.a.createElement(Zn,{width:1024,height:800},r.a.createElement(_n,null,"Editing ".concat(e)),r.a.createElement(ne,null,r.a.createElement(oe,{ref:j,onSubmit:O,initialData:{text:t,inConnections:l,outConnections:u,type:o.label?[o]:[]}},r.a.createElement(te,null,"id:rootNode"===n.id?null:r.a.createElement(kn,{name:"inConnections",label:"In Connections",placeholder:"Select in connections...",isMulti:!0,options:d,width:300,containerStyles:{backgroundColor:"#fff"},selectedItemStyles:{color:"#000"},inputStyles:{color:"#000"},listStyles:{color:"#000"}}),r.a.createElement(kn,{name:"outConnections",label:"Out Connections",placeholder:"Select out connections...",isMulti:!0,options:d,width:300,containerStyles:{backgroundColor:"#fff"},inputStyles:{color:"#000"},listStyles:{color:"#000"}}),r.a.createElement(kn,{name:"type",label:"Dialogue Type",placeholder:"Select dialogue type...",containerStyles:{backgroundColor:"#fff"},inputStyles:{color:"#000"},listStyles:{color:"#000"},options:[{label:"Player",value:"Player"},{label:"AICharacter",value:"AICharacter"}],width:300})),r.a.createElement(En,{width:"100%",height:20}),r.a.createElement(ee,null,r.a.createElement(In,{name:"text",autoFocus:!0,placeholder:"Dialogue text...",width:960})),r.a.createElement(En,{width:"100%",height:30}),r.a.createElement(ee,null,r.a.createElement(B,{onClick:function(){var n;return null===(n=j.current)||void 0===n?void 0:n.submitForm()}},"Save"))))))}())})),ie=function(n){var e=n.identifier;return r.a.createElement("div",null,r.a.createElement(re,{identifier:e}))},ce=t(94),ae=t(49),le=function(n){var e=n.id,t=n.left,i=n.top,c=Object(ce.a)({item:{type:s,id:e,left:t,top:i},collect:function(n){return{isDragging:n.isDragging()}}}),a=Object(p.a)(c,3),l=a[0].isDragging,u=a[1],d=a[2];return Object(o.useEffect)((function(){d(Object(ae.a)(),{captureDraggingState:!0})}),[d]),r.a.createElement("div",{ref:u,style:f(t,i,l)},r.a.createElement(re,{identifier:e}))};function ue(){var n=Object(D.a)(["\n  width: 100vw;\n  height: 90vh;\n  left: 0;\n  top: 0;\n  z-index: 100;\n  position: fixed;\n  pointer-events: none;\n"]);return ue=function(){return n},n}function de(){var n=Object(D.a)(["\n  width: 100vw;\n  height: 90vh;\n  position: relative;\n"]);return de=function(){return n},n}var se=a.c.div(de()),fe=a.c.div(ue()),he=function(){var n=Object(d.a)((function(n){return{item:n.getItem(),itemType:n.getItemType(),initialOffset:n.getInitialSourceClientOffset(),currentOffset:n.getSourceClientOffset(),isDragging:n.isDragging()}})),e=n.itemType,t=n.isDragging,o=n.item,i=n.initialOffset,c=n.currentOffset;return t?r.a.createElement(fe,null,r.a.createElement("div",{style:h(i,c)},function(){switch(e){case s:return r.a.createElement(ie,{identifier:o.id});default:return null}}())):null},be=t(95);function me(){var n=Object(D.a)(["\n  background: #fff;\n  border-bottom: ",";\n  padding: 5px 25px;\n\n  cursor: pointer;\n\n  :hover {\n    background: #f1f1f1;\n  }\n"]);return me=function(){return n},n}function pe(){var n=Object(D.a)(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n\n  z-index: 300;\n"]);return pe=function(){return n},n}var ve=a.c.div(pe(),(function(n){return n.y}),(function(n){return n.x+5})),ge=a.c.div(me(),(function(n){return n.last?null:"dotted 1px #ccc"})),xe=function(n){var e=n.options,t=n.visible,i=n.changeVisibility,c=Object(o.useState)({x:0,y:0}),a=Object(p.a)(c,2),l=a[0],u=a[1],d=function(n){n.preventDefault();var e=n.clientX,t=n.clientY;u({x:e,y:t})};return Object(o.useEffect)((function(){return document.addEventListener("contextmenu",d),function(){document.removeEventListener("contextmenu",d)}}),[]),t?r.a.createElement(ve,{x:l.x,y:l.y},e.map((function(n,e,t){return r.a.createElement(ge,{key:e.toString(),last:t.length-1===e,onClick:function(e){n.callback&&n.callback(e),function(n){n.preventDefault(),i(!1),u({x:0,y:0})}(e)}},n.label)}))):null},ye=Object(o.memo)(Object(v.a)((function(){var n=Object(o.useContext)(N),e=n.nodesStore,t=n.connectionsStore;return r.a.createElement("svg",{width:"100%",height:"100%",style:{zIndex:400}},r.a.createElement("defs",null,r.a.createElement("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",fill:b.colors.textSecondary,refX:"0",refY:"3.5",orient:"auto"},r.a.createElement("polygon",{points:"0 0, 10 3.5, 0 7"}))),t.connectionsKeys.length>0?t.connectionsKeys.map((function(n){var o=t.connections[n],i=e.nodes[o.fromId],c=e.nodes[o.toId];if(void 0===i||void 0===c)return null;var a={x:i.left,y:i.top},l={x:c.left,y:c.top};return r.a.createElement(m,{key:"".concat(o.fromId).concat(o.toId),from:a,to:l,markerMid:"url(#arrowhead)"})})):null)}))),je=Object(v.a)((function(){var n=Object(o.useContext)(N),e=n.nodesStore,t=n.filesStore,i=Object(o.useState)(!1),c=Object(p.a)(i,2),a=c[0],l=c[1],u=Object(o.useState)(e.nodesKeys.length),d=Object(p.a)(u,2),f=d[0],h=d[1],b=Object(o.useCallback)((function(n,t,o){e.updateNodePosition(n,t,o)}),[e]),m=Object(be.a)({accept:s,drop:function(n,e){var t=e.getDifferenceFromInitialOffset(),o=Math.round(n.left+t.x),r=Math.round(n.top+t.y);b(n.id,o,r)}}),v=Object(p.a)(m,2)[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{options:[{label:"New Node",callback:function(n){var t,o,r,i="id:node".concat(f),c=n.clientX-100,a=n.clientY-75;t=i,o=c,r=a,h(f+1),e.addNode(t,o,r)}},{label:"Load File",callback:function(){t.setModal(!0)}},{label:"Close"}],visible:a,changeVisibility:l}),r.a.createElement(se,{ref:v,onContextMenu:function(){return l(!0)},onClick:function(){return l(!1)}},e.nodesKeys.map((function(n){return function(n,e){return r.a.createElement(le,Object.assign({key:e,id:e},n))}(e.nodes[n],n)})),r.a.createElement(ye,null)))})),Oe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(je,null),r.a.createElement(he,null))},Ee=t(46),we=t.n(Ee),ke=t(54),Ce=t(39),Se=t(91),Ie=t(92),Fe=t(55),Me=t.n(Fe);function Ne(){var n=Object(D.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 100%;\n\n  padding: 8px 16px;\n  margin-right: 4px;\n"]);return Ne=function(){return n},n}function De(){var n=Object(D.a)(["\n  position: absolute;\n  z-index: 400;\n  top: 10vh;\n  left: 0;\n  width: 400px;\n  height: ",";\n\n  background: ",";\n"]);return De=function(){return n},n}function ze(){var n=Object(D.a)(["\n  color: white;\n  cursor: pointer;\n"]);return ze=function(){return n},n}function Le(){var n=Object(D.a)(["\n  color: white;\n  cursor: pointer;\n"]);return Le=function(){return n},n}function Ve(){var n=Object(D.a)(["\n  width: 100%;\n  height: 10vh;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n\n  padding: 16px 32px;\n  background: ",";\n\n  font-size: 30px;\n  position: sticky;\n"]);return Ve=function(){return n},n}function Be(){var n=Object(D.a)(["\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  padding: 16px;\n"]);return Be=function(){return n},n}function Te(){var n=Object(D.a)(["\n  height: 100%;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  font-size: 0.8em;\n  font-weight: bold;\n\n  color: ",";\n"]);return Te=function(){return n},n}var Ke=a.c.div(Te(),(function(n){return n.theme.colors.text})),Re=a.c.div(Be()),Ae=a.c.div(Ve(),(function(n){return n.theme.colors.backgroundSecondary})),Pe=Object(a.c)(Se.a)(Le()),Ye=Object(a.c)(Ie.a)(ze()),Je=Object(a.c)(Me.a)(De(),(function(n){return n.height}),(function(n){return n.theme.colors.backgroundSecondary})),We=Object(a.c)(Ce.a.div)(Ne()),$e=Object(v.a)((function(){var n=Object(o.useState)(!1),e=Object(p.a)(n,2),t=e[0],i=e[1],c=Object(Ce.b)(t,null,{from:{position:"absolute",opacity:0},enter:{opacity:1},leave:{opacity:0}}),a=Object(o.useContext)(N),l=a.nodesStore,u=a.connectionsStore,d=a.filesStore,s=function(){var n=[];u.connectionsKeys.forEach((function(e){n.push(Object(w.toJS)(u.connections[e]))}));var e={name:"NewFile",nodes:l.nodes,connections:n};d.file=e},f=function(){var n=Object(ke.a)(we.a.mark((function n(){var e,t,o,r;return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(),e=JSON.stringify(d.file),t=new Blob([e],{type:"application/json"}),n.next=5,URL.createObjectURL(t);case 5:o=n.sent,(r=document.createElement("a")).href=o,r.download=d.file.name+".json",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),h=function(){i(!t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,null,c.map((function(n){var e=n.item,t=n.key,o=n.props;return e?r.a.createElement(We,{key:t,style:o},r.a.createElement(Ye,{fontSize:"inherit",onClick:h})):r.a.createElement(We,{key:t,style:o},r.a.createElement(Pe,{fontSize:"inherit",onClick:h}))})),r.a.createElement(En,{width:32,height:"100%"}),r.a.createElement(Ke,null,"Dialogue Editor")),r.a.createElement(Je,{height:t?"auto":0,duration:400},r.a.createElement(Re,null,r.a.createElement(B,{onClick:function(){l.reset()}},"Clear"),r.a.createElement(En,{width:"100%",height:20}),r.a.createElement(B,{onClick:f},"Download"),r.a.createElement(En,{width:"100%",height:20}),r.a.createElement(B,{onClick:function(){return d.setModal(!0)}},"Load File"))))})),Ue=t(57);function Xe(){var n=Object(D.a)(["\n  width: 100%;\n  height: 100%;\n\n  padding: 24px;\n"]);return Xe=function(){return n},n}function He(){var n=Object(D.a)(["\n  width: 100%;\n  height: auto;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n"]);return He=function(){return n},n}function qe(){var n=Object(D.a)(["\n  width: 100%;\n  height: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return qe=function(){return n},n}function Ge(){var n=Object(D.a)(["\n  width: 100%;\n  height: 87.5%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Ge=function(){return n},n}function Qe(){var n=Object(D.a)(["\n  width: 100%;\n  height: 12.5%;\n\n  padding: 8px 24px;\n  text-align: center;\n\n  color: ",";\n"]);return Qe=function(){return n},n}function Ze(){var n=Object(D.a)(["\n  background: ",";\n  width: ","px;\n  height: ","px;\n  border-radius: 16px;\n\n  display: flex;\n  flex-direction: column;\n\n  color: ",";\n"]);return Ze=function(){return n},n}var _e=a.c.div(Ze(),(function(n){return n.theme.colors.backgroundSecondary}),(function(n){return n.width||400}),(function(n){return n.height||400}),(function(n){return n.theme.colors.textSecondary})),nt=a.c.h2(Qe(),(function(n){return n.theme.colors.text})),et=a.c.div(Ge()),tt=(a.c.div(qe()),a.c.div(He()),Object(a.c)(Nn.a)(Xe()),Object(v.a)((function(){var n=Object(o.useContext)(N).filesStore,e=Object(o.useCallback)((function(e){var t=new FileReader;t.onabort=function(){return console.log("Read aborted")},t.onerror=function(){return console.log("Read failed")},t.onload=function(){var e,o=null===(e=t.result)||void 0===e?void 0:e.toString(),r=void 0!==o&&JSON.parse(o);n.file=r,n.loadFileContent(),n.setModal(!1)},t.readAsText(e[0])}),[n]),t=Object(Ue.a)({onDrop:e,accept:"application/json",multiple:!1}),i=t.getRootProps,c=t.getInputProps,a=t.isDragActive;return r.a.createElement(g.Modal,{isVisible:n.loadFileModal,onBackdropClick:function(){return n.setModal(!1)}},r.a.createElement(_e,null,r.a.createElement(nt,null,"Load File"),r.a.createElement(et,null,r.a.createElement("div",i(),r.a.createElement("input",c()),a?r.a.createElement("p",null,"Drop the files here..."):r.a.createElement("p",null,"Drag and drop files / Click here")))))}))),ot=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($e,null),r.a.createElement(tt,null),r.a.createElement(l.a,{backend:u.a},r.a.createElement(Oe,null)))};function rt(){var n=Object(D.a)(["\n  * {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    top: 0;\n    left: 0;\n    font-family: 'Fira Code', monospace;\n  }\n\n  html, body {\n    width: 100vw;\n    height: 100vh;\n    background: ",";\n  }\n\n  #root {\n    width: 100%;\n    height: 100%;\n  }\n\n  #modal-root {\n    width: auto;\n    height: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* pointer-events: none; */\n    z-index: 1000;\n  }\n"]);return rt=function(){return n},n}var it=Object(a.b)(rt(),(function(n){return n.theme.colors.background}));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(a.a,{theme:b},r.a.createElement(it,null),r.a.createElement(ot,null))),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.7ce24f2e.chunk.js.map